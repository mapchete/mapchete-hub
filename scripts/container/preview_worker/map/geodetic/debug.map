MAP
  NAME "map"
  IMAGETYPE png
  SIZE 1600 800
  UNITS meters
  DEFRESOLUTION 72
  EXTENT -180 -90 180 90
  CONFIG "MS_ERRORFILE" "stderr"
  IMAGECOLOR "#182c4e"

  CONFIG "AWS_ACCESS_KEY_ID" "REDACTED_API_KEY"
  CONFIG "AWS_SECRET_ACCESS_KEY" "ceeZEwISRbBr5GwcNacG7QmqIJqm5Sj0xZ6uoD1F"
  # Constrain GDAL to read just the tif it is pointed at
  CONFIG "CPL_VSIL_CURL_ALLOWED_EXTENSIONS" ".tif"
  CONFIG "GDAL_DISABLE_READDIR_ON_OPEN" "TRUE"
  # cache size in bytes
  CONFIG "VSI_CACHE" "TRUE"
  CONFIG "VSI_CACHE_SIZE" "50000000"

  OUTPUTFORMAT
    NAME "png"
    DRIVER AGG/PNG
    MIMETYPE "image/png"
    IMAGEMODE RGBA
    EXTENSION "png"
    FORMATOPTION "GAMMA=0.75"
    FORMATOPTION "COMPRESSION=0"
  END
  OUTPUTFORMAT
    NAME "jpeg"
    DRIVER AGG/JPEG
    MIMETYPE "image/jpeg"
    IMAGEMODE RGB
    EXTENSION "jpg"
    FORMATOPTION "GAMMA=0.75"
    FORMATOPTION "QUALITY=90"
  END
  WEB
    METADATA
      OWS_ENABLE_REQUEST "*"
      WMS_SRS "EPSG:4326"
      WMS_EXTENT "-180 -90 180 90"
      WMS_ONLINERESOURCE "http://localhost/"
      LABELCACHE_MAP_EDGE_BUFFER "-10"
      WMS_TITLE "eox_maps_dev"
    END
  END
  PROJECTION
    'init=epsg:4326'
  END

  #######################
  # white land polygons #
  #######################
  LAYER
    NAME ne_land
    STATUS ON
    TYPE POLYGON
    DATA "/mapdata/naturalearth/ne_10m_land"
    PROJECTION
      "init=epsg:4326"
    END
    CLASS
      STYLE
        COLOR "#ffffff"
        OPACITY 100
      END
    END
  END

  ###################
  # cloudless tiles #
  ###################
  LAYER
    NAME rgb_z0
    MINSCALEDENOM 200000000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/0.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z1
    MAXSCALEDENOM 200000000
    MINSCALEDENOM 100000000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/1.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z2
    MAXSCALEDENOM 100000000
    MINSCALEDENOM 50000000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/2.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z3
    MAXSCALEDENOM 50000000
    MINSCALEDENOM 25000000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/3.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z4
    MAXSCALEDENOM 25000000
    MINSCALEDENOM 12500000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/4.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z5
    MAXSCALEDENOM 12500000
    MINSCALEDENOM 6500000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/5.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z6
    MAXSCALEDENOM 6500000
    MINSCALEDENOM 2000000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/6.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z7
    MAXSCALEDENOM 2000000
    MINSCALEDENOM 1500000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/7.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z8
    MAXSCALEDENOM 1500000
    MINSCALEDENOM 750000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/8.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z9
    MAXSCALEDENOM 750000
    MINSCALEDENOM 400000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/9.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z10
    MAXSCALEDENOM 400000
    MINSCALEDENOM 200000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/10.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z11
    MAXSCALEDENOM 200000
    MINSCALEDENOM 100000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/11.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z12
    MAXSCALEDENOM 100000
    MINSCALEDENOM 50000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/12.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
  END
  LAYER
    NAME rgb_z13
    MAXSCALEDENOM 50000
    STATUS ON
    TYPE RASTER
    TILEINDEX "/indexes/eox-s2cloudless-2019/rgbnir/13.shp"
    TILEITEM "location"
    OFFSITE 0 0 0
    TRANSPARENCY 100
    PROCESSING "BANDS=1,2,3"
    PROCESSING "SCALE_1=0, 2000"
    PROCESSING "SCALE_2=0, 2500"
    PROCESSING "SCALE_3=0, 2500"
    PROJECTION
      "init=epsg:4326"
    END
    PROCESSING "RESAMPLE=BILINEAR"
  END

END
